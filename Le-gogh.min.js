var Lego=function(A,I,g){"use strict";var C={CANVAS_DOC:"",CANVAS_WIDTH:0,CANVAS_HEIGHT:0},B={LOAD_SRC:"",SAVE_SRC:"",LOAD_BINARY:"",TRAN_BINARY:null},i={LEGO_SRC:"data:image/png;base64,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",
LEGO_BIN:"",BLOCK_SIZE:.024,ORI_WIDTH:0,FIX_WIDTH:0,ORI_HEIGHT:0,FIX_HEIGHT:0},E=function(A){var I=new Image;I.onload=function(){B.LOAD_BINARY=I,i.ORI_WIDTH=I.width,
i.ORI_HEIGHT=I.height,C.CANVAS_WIDTH=I.width,C.CANVAS_HEIGHT=I.height,C.CANVAS_DOC.width=C.CANVAS_WIDTH,C.CANVAS_DOC.height=C.CANVAS_HEIGHT,A.apply()},I.src=B.LOAD_SRC;
},t=function(A){A.mozImageSmoothingEnabled=!0,A.webkitImageSmoothingEnabled=!0,A.imageSmoothingEnabled=!0;for(var I=0;I<C.CANVAS_WIDTH;I+=1/i.BLOCK_SIZE)for(var g=0;g<C.CANVAS_HEIGHT;g+=1/i.BLOCK_SIZE)A.drawImage(i.LEGO_BIN,0,0,50,50,I,g,1/i.BLOCK_SIZE,1/i.BLOCK_SIZE);
},n=function(){var A=C.CANVAS_DOC,I=A.getContext("2d");I.clearRect(0,0,A.width,A.height),I.mozImageSmoothingEnabled=!1,I.webkitImageSmoothingEnabled=!1,I.imageSmoothingEnabled=!1,
I.drawImage(B.LOAD_BINARY,0,0,i.ORI_WIDTH,i.ORI_HEIGHT,0,0,C.CANVAS_WIDTH*i.BLOCK_SIZE,C.CANVAS_HEIGHT*i.BLOCK_SIZE),I.drawImage(A,0,0,C.CANVAS_WIDTH*i.BLOCK_SIZE,C.CANVAS_HEIGHT*i.BLOCK_SIZE,0,0,C.CANVAS_WIDTH,C.CANVAS_HEIGHT),
B.TRAN_BINARY=I.getImageData(0,0,C.CANVAS_WIDTH,C.CANVAS_HEIGHT),I.clearRect(0,0,A.width,A.height),I.putImageData(B.TRAN_BINARY,0,0),I.globalCompositeOperation="multiply",
t(I)},e=function(){var A=C.CANVAS_DOC.getContext("2d");A.drawImage(B.LOAD_BINARY,0,0,i.ORI_WIDTH,i.ORI_HEIGHT,0,0,C.CANVAS_WIDTH,C.CANVAS_HEIGHT)},o=function(){var A=new Image;
A.onload=function(){this.height=20,this.width=20,i.LEGO_BIN=this},A.src=i.LEGO_SRC},D=function(A){A.attr("min",25),A.attr("max",60),A.on("change",function(){i.BLOCK_SIZE=this.value/1e3,
n()})},S=function(A,I){A.on("change",function(){B.SAVE_SRC=this.value,I.attr("download",B.SAVE_SRC+".jpg")})},a=function(A){A.click(function(){B.TRAN_BINARY=C.CANVAS_DOC.toDataURL("image/png"),
this.href=B.TRAN_BINARY})};return A.run=function(A,g,i,t,n){B.LOAD_SRC=A,C.CANVAS_DOC=document.getElementById(g),E(e),o(),D(I("#"+i)),S(I("#"+t),I("#"+n)),a(I("#"+n));
},A}(window.Lego||{},jQuery);Lego.run($("#load-image").attr("src"),"test","meter","name","save");